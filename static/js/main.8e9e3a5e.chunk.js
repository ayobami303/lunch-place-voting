(this["webpackJsonplunch-place-voting"]=this["webpackJsonplunch-place-voting"]||[]).push([[0],{52:function(e,t,n){},57:function(e,t,n){},80:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(22),i=n.n(c),s=(n(52),n(16)),o=n(45),l=n(46),u=n(13),p=n(14),j=n(18),d=n(37),b=(n(38),n(9)),O={appLoading:!1,venues:[],votes:{}};var v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,t=arguments.length>1?arguments[1]:void 0;if("APP_LOADING"===t.type)return Object(b.a)(Object(b.a)({},e),{},{appLoading:t.loading});if("VENUES"===t.type){var n=[].concat(Object(p.a)(e.venues),[t.payload]);return Object(b.a)(Object(b.a)({},e),{},{venues:n})}if("RESET_VENUES"===t.type)return Object(b.a)(Object(b.a)({},e),{},{venues:[]});if("VOTES"===t.type){var a=Object(b.a)({},e.votes),r=a.participant?a.participant:[];return a[t.payload.vote]?a[t.payload.vote]=a[t.payload.vote]+1:a[t.payload.vote]=1,a.participant=[].concat(Object(p.a)(r),[{name:t.payload.participant,vote:t.payload.vote}]),Object(b.a)(Object(b.a)({},e),{},{votes:a})}return e},h=Object(j.b)({app:v}),x=[d.a];x=Object(p.a)(x);var f,m,g,y,N,S,E,w,k,P,_=Object(j.d)(h,Object(j.c)(j.a.apply(void 0,Object(p.a)(x)),window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__())),L=n(7),T=n(8),V=T.a.h1(f||(f=Object(L.a)(["\n  margin: 20px 0;\n"]))),I=(n(57),n(21)),A=n(11),C=n(47),D=T.a.div(m||(m=Object(L.a)(["\n  margin: 20px 0;\n  padding: 36px 24px;\n  background-color: #f7f7f7;\n"]))),R=Object(T.a)(C.a)(g||(g=Object(L.a)(["\n  background-color: #554cb4;\n  border-radius: 999px;\n\n  &:active,\n  &:focus,\n  &:hover {\n    background-color: #3f34b7;\n  }\n\n  &:disabled {\n    background-color: #c4c4c4;\n  }\n"]))),U=T.a.a(y||(y=Object(L.a)(["\n  color: #212529;\n\n  &:hover {\n    text-decoration: none;\n    color: #212529;\n  }\n"]))),G=T.a.p(N||(N=Object(L.a)(["\n  margin-bottom: 0;\n  padding: 14px;\n  ","\n  &:hover {\n    text-decoration: none;\n    color: #212529;\n    background-color: #e4e4e4;\n  }\n"])),(function(e){return e.leading?"background-color: #f1f4e1;":""})),Y=T.a.span(S||(S=Object(L.a)(["\n  color: #554cb4;\n  text-decoration: underline;\n"]))),M=T.a.span(E||(E=Object(L.a)(["\n  font-weight: normal;\n  font-size: 14px;\n"]))),B=T.a.span(w||(w=Object(L.a)([""]))),F=T.a.i(k||(k=Object(L.a)(["\n  font-size: 24px;\n  color: #b7c747;\n  margin: 12px 0;\n"]))),X=T.a.td(P||(P=Object(L.a)(["\n  min-width: 200px;\n"]))),Z=n(10),q=n.n(Z),H=n(12),J=n(42),K=n.n(J),Q=n(43),z=n.n(Q).a.create({baseURL:"https://api.foursquare.com/v2/venues",timeout:25e3});z.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded",z.interceptors.request.use(function(){var e=Object(H.a)(q.a.mark((function e(t){return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.params={client_id:"ESGURNY00HZHRDZGOQYKJ5OOMFYRUITNYIAZCIONK4NMSMS4",client_secret:"DC3SK2ZIGW1GS21AV1GMPURP54PPAMYQR5LYT0EBQACST03N",v:"20210425"},e.abrupt("return",t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),(function(e){return Promise.reject(e)})),z.interceptors.response.use((function(e){return e}),(function(e){return e.response||"Network Error"!==e.message||alert("Your device appears offline. Please check your Internet connections."),e.response&&404===e.response.status&&alert("Something went wrong. Please try again"),Promise.reject(e)}));var W=n(1);var $=Object(s.b)(null,{getVenue:function(e){return function(){var t=Object(H.a)(q.a.mark((function t(n){var a;return q.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n({type:"APP_LOADING",loading:!0}),t.prev=1,t.next=4,z.get("/explore?"+K.a.stringify({near:e,limit:3,query:"lunch",sortByPopularity:!0}));case 4:if(200!==(a=t.sent).data.meta.code){t.next=11;break}if(n({type:"RESET_VENUES"}),!(a.data.response.groups[0].items.length>0)){t.next=11;break}return t.next=10,a.data.response.groups[0].items.map(function(){var e=Object(H.a)(q.a.mark((function e(t,r){var c;return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,z.get("/"+t.venue.id);case 3:return 200===(c=e.sent).data.meta.code&&n({type:"VENUES",payload:c.data.response.venue}),a.data.response.groups[0].items.length-1===r&&n({type:"APP_LOADING",loading:!1}),e.abrupt("return");case 9:return e.prev=9,e.t0=e.catch(0),e.abrupt("return",e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,n){return e.apply(this,arguments)}}());case 10:t.sent;case 11:t.next=17;break;case 13:t.prev=13,t.t0=t.catch(1),n({type:"APP_LOADING",loading:!1}),alert("Something went wrong. Please try again.");case 17:case"end":return t.stop()}}),t,null,[[1,13]])})));return function(e){return t.apply(this,arguments)}}()}})((function(e){var t=Object(a.useState)(""),n=Object(I.a)(t,2),r=n[0],c=n[1];return Object(W.jsx)(D,{children:Object(W.jsx)(A.a,{onSubmit:function(t){t.preventDefault();var n=t.target.elements.location.value;e.getVenue(n)},children:Object(W.jsxs)(A.a.Row,{children:[Object(W.jsx)(u.a,{md:8,lg:6,children:Object(W.jsxs)(A.a.Group,{controlId:"formBasicEmail",children:[Object(W.jsx)(A.a.Control,{value:r,name:"location",type:"text",placeholder:"e.g Amsterdam","aria-describedby":"location-description",onChange:function(e){c(e.target.value)}}),Object(W.jsx)(A.a.Text,{className:"text-muted",id:"location-description",children:"Have another place in mind?"})]})}),Object(W.jsx)(u.a,{md:4,lg:2,children:Object(W.jsx)(R,{type:"submit",disabled:r.trim().length<=0,block:!0,children:"Search"})})]})})})})),ee=n(44);var te=function(e){var t=e.name;return Object(W.jsx)("p",{className:"mb-0",children:t})};function ne(e){var t=e.venue,n=e.votes,a=e.mostVotes;return t?Object(W.jsx)(U,{target:"blank",href:t.url||t.shortUrl,children:Object(W.jsxs)(G,{className:"text-center",leading:a===n&&0!==n,children:[a===n&&0!==n&&Object(W.jsx)(F,{className:"fas fa-check-circle"}),a>n&&Object(W.jsx)("br",{}),Object(W.jsx)("br",{}),Object(W.jsx)(Y,{children:t.name}),Object(W.jsx)("br",{}),Object(W.jsx)(M,{children:void 0!==t.categories&&t.categories.map((function(e,n){return Object(W.jsxs)("span",{children:[Object(W.jsx)("span",{children:e.name}),n<t.categories.length-1&&", "]},n)}))}),Object(W.jsx)("br",{}),Object(W.jsx)("br",{}),Object(W.jsx)(B,{children:t.rating})]})}):null}ne.defaultProps={votes:0,mostVotes:0};var ae=ne;var re=function(){return Object(W.jsx)(F,{className:"fas fa-check-circle text-center"})};var ce=Object(s.b)((function(e){var t=e.app;return{appLoading:t.appLoading,venues:t.venues,votes:t.votes}}),{participantVote:function(e,t){return function(){var n=Object(H.a)(q.a.mark((function n(a){return q.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:a({type:"VOTES",payload:{participant:e,vote:t}});case 1:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}})((function(e){var t=Object(a.useState)(""),n=Object(I.a)(t,2),r=n[0],c=n[1],i=Object(a.useState)(""),s=Object(I.a)(i,2),o=s[0],l=s[1];if(e.venues.length<=0&&!e.appLoading)return null;function u(e){l(e.target.value)}function p(e){if(!e.participant)return 0;var t=Object(b.a)({},e);return delete t.participant,1===e.participant.length?1:Object.keys(t).reduce((function(e,n){return t[e]>t[n]?t[e]:t[n]}))}return Object(W.jsxs)(D,{children:[e.appLoading&&Object(W.jsx)("div",{className:"d-flex justify-content-center p-3",children:Object(W.jsx)(F,{className:"fas fa-spinner fa-pulse text-center"})}),!e.appLoading&&Object(W.jsx)(A.a,{onSubmit:function(t){t.preventDefault();var n=t.target.elements.participant.value,a=t.target.elements.vote.value;c(""),l(""),e.participantVote(n,a)},children:Object(W.jsxs)(ee.a,{responsive:!0,className:"bg-white",children:[Object(W.jsx)("thead",{children:Object(W.jsxs)("tr",{children:[Object(W.jsx)("th",{children:"Participants"}),e.venues.map((function(t,n){return Object(W.jsx)("th",{className:"p-0",children:Object(W.jsx)(ae,{venue:t,votes:e.votes[t.id],mostVotes:p(e.votes)},n)},n)}))]})}),Object(W.jsx)("tbody",{children:void 0!==e.votes.participant&&e.votes.participant.length>0&&e.votes.participant.map((function(t,n){return Object(W.jsxs)("tr",{children:[Object(W.jsx)("td",{className:"align-middle",children:Object(W.jsx)(te,{name:t.name})}),e.venues.map((function(e,n){return Object(W.jsx)("td",{className:"align-middle text-center",children:t.vote===e.id&&Object(W.jsx)(re,{})},n)}))]},n)}))}),Object(W.jsxs)("tfoot",{children:[Object(W.jsxs)("tr",{children:[Object(W.jsx)(X,{className:"align-middle",children:Object(W.jsx)(A.a.Control,{value:r,name:"participant",type:"text",placeholder:"Tell us your name",onChange:function(e){c(e.target.value)}})}),e.venues.map((function(e,t){return Object(W.jsx)(X,{children:Object(W.jsx)(A.a.Check,{custom:!0,type:"radio",id:e.id,value:e.id,name:"vote",label:"I love this",onChange:u,checked:o===e.id})},t)}))]}),Object(W.jsxs)("tr",{children:[Object(W.jsx)("td",{}),Object(W.jsx)("td",{}),Object(W.jsx)("td",{}),Object(W.jsx)(X,{children:Object(W.jsx)(R,{type:"submit",className:"float-right",disabled:r.trim().length<=0||o.trim().length<=0,children:"Add Participant"})})]})]})]})})]})}));var ie=function(){return Object(W.jsx)(s.a,{store:_,children:Object(W.jsx)(o.a,{children:Object(W.jsx)(l.a,{children:Object(W.jsxs)(u.a,{children:[Object(W.jsx)(V,{children:"LunchPlace"}),Object(W.jsx)($,{}),Object(W.jsx)(ce,{})]})})})})},se=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,81)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),a(e),r(e),c(e),i(e)}))};i.a.render(Object(W.jsx)(r.a.StrictMode,{children:Object(W.jsx)(ie,{})}),document.getElementById("root")),se()}},[[80,1,2]]]);
//# sourceMappingURL=main.8e9e3a5e.chunk.js.map